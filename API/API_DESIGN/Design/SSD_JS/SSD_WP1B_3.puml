@startuml

Patient -> PatientController : POST /api/patient/available-slots\n{date, physicianFullName}
activate PatientController

PatientController -> AppointmentService : getAvailableSlots(date, physicianFullName)
activate AppointmentService

AppointmentService -> SpringBootPhysicianRepository : findByBaseUserFullName(physicianFullName)
activate SpringBootPhysicianRepository
SpringBootPhysicianRepository --> AppointmentService : Physician
deactivate SpringBootPhysicianRepository

alt for each day from startDate to startDate+10
  AppointmentService -> SpringBootAppointmentRepository : findByPhysicianAndDate(physicianFullName, currentDate)
  activate SpringBootAppointmentRepository
  SpringBootAppointmentRepository --> AppointmentService : List<Appointment>
  deactivate SpringBootAppointmentRepository
end

AppointmentService --> PatientController : List<DailySlots>
deactivate AppointmentService

PatientController -> AvailableSlotsView : new(DailySlots)  …
note right: map each DailySlots → AvailableSlotsView
PatientController --> Patient : HTTP 200 OK + [AvailableSlotsView]
deactivate PatientController

@enduml